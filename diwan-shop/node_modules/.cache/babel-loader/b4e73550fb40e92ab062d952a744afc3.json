{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/MohannadDiwan/Desktop/E-commerce/diwan-shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/MohannadDiwan/Desktop/E-commerce/diwan-shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";export var api=createAsyncThunk(\"productsSlice/api\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_,thunkApi){var rejectWithValue,res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=thunkApi.rejectWithValue;_context.prev=1;_context.next=4;return fetch(\"http://localhost:3000/products\");case 4:res=_context.sent;_context.next=7;return res.json();case 7:data=_context.sent;return _context.abrupt(\"return\",data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",rejectWithValue(_context.t0.message));case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var insert=createAsyncThunk(\"productsSlice/insert\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(productData,thunkApi){var rejectWithValue,res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rejectWithValue=thunkApi.rejectWithValue;_context2.prev=1;_context2.next=4;return fetch(\"http://localhost:3000/products\",{method:\"POST\",body:JSON.stringify(productData),headers:{\"Content-type\":\"application/json; charset=utf-8\"}});case 4:res=_context2.sent;_context2.next=7;return res.json();case 7:data=_context2.sent;return _context2.abrupt(\"return\",data);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",rejectWithValue(_context2.t0.message));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var update=createAsyncThunk(\"productsSlice/update\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(productData,thunkApi){var rejectWithValue,res,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:rejectWithValue=thunkApi.rejectWithValue;_context3.prev=1;_context3.next=4;return fetch(\"http://localhost:3000/products/\".concat(productData.id),{method:\"PUT\",body:JSON.stringify(productData),headers:{\"Content-type\":\"application/json; charset=utf-8\"}});case 4:res=_context3.sent;_context3.next=7;return res.json();case 7:data=_context3.sent;return _context3.abrupt(\"return\",data);case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);return _context3.abrupt(\"return\",rejectWithValue(_context3.t0.message));case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,11]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var deletePro=createAsyncThunk(\"productsSlice/deletePro\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(productData,thunkApi){var rejectWithValue;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:rejectWithValue=thunkApi.rejectWithValue;console.log(productData);_context4.prev=2;_context4.next=5;return fetch(\"http://localhost:3000/products/\".concat(productData.id),{method:\"DELETE\",headers:{\"Content-type\":\"application/json; charset=utf-8\"}});case 5:return _context4.abrupt(\"return\",productData);case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](2);return _context4.abrupt(\"return\",rejectWithValue(_context4.t0.message));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[2,8]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}());var productsSlice=createSlice({name:\"productsSlice\",initialState:{products:[],loading:false,error:null},reducers:{// addProduct: (state, action) => {\n//   state.products.push(action.payload);\n// },\n// updateProduct: (state, action) => {\n//   console.log(state.productName);\n//   console.log(action.payload);\n//   const { id, productName, price, category } = action.payload;\n//   const updateState = state.products.find(\n//     (product) => product.id.toString() === id.toString()\n//   );\n//   console.log(action.payload.productName);\n//   if (updateState) {\n//     updateState.productName = productName;\n//     updateState.price = price;\n//     updateState.category = category;\n//   }\n// },\n},extraReducers:function extraReducers(builder){builder.addCase(api.pending,function(state,action){state.loading=true;state.error=null;});builder.addCase(api.fulfilled,function(state,action){state.loading=false;state.products=action.payload;});builder.addCase(api.rejected,function(state,action){state.loading=false;state.error=action.payload;});builder.addCase(insert.pending,function(state,action){state.loading=true;state.error=null;});builder.addCase(insert.fulfilled,function(state,action){state.loading=false;state.products.push(action.payload);});builder.addCase(insert.rejected,function(state,action){state.loading=false;state.error=action.payload;});builder.addCase(deletePro.fulfilled,function(state,action){state.loading=false;state.products=state.products.filter(function(product){return product.id!==action.payload.id;});});builder.addCase(update.fulfilled,function(state,action){var _action$payload=action.payload,id=_action$payload.id,productName=_action$payload.productName,price=_action$payload.price,category=_action$payload.category,img=_action$payload.img;var updateState=state.products.find(function(product){return product.id===id;});console.log(action.payload.img);if(updateState){updateState.productName=productName;updateState.price=price;updateState.category=category;updateState.img=img;}});}});var _productsSlice$action=productsSlice.actions,addProduct=_productsSlice$action.addProduct,updateProduct=_productsSlice$action.updateProduct;export{addProduct,updateProduct};export default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","_","thunkApi","rejectWithValue","fetch","res","json","data","message","insert","productData","method","body","JSON","stringify","headers","update","id","deletePro","console","log","productsSlice","name","initialState","products","loading","error","reducers","extraReducers","builder","addCase","pending","state","action","fulfilled","payload","rejected","push","filter","product","productName","price","category","img","updateState","find","actions","addProduct","updateProduct","reducer"],"sources":["C:/Users/MohannadDiwan/Desktop/E-commerce/diwan-shop/src/rtk/slices/productsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nexport const api = createAsyncThunk(\r\n  \"productsSlice/api\",\r\n  async (_, thunkApi) => {\r\n    const { rejectWithValue } = thunkApi;\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/products\");\r\n      const data = await res.json();\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const insert = createAsyncThunk(\r\n  \"productsSlice/insert\",\r\n  async (productData, thunkApi) => {\r\n    const { rejectWithValue } = thunkApi;\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/products\", {\r\n        method: \"POST\",\r\n\r\n        body: JSON.stringify(productData),\r\n\r\n        headers: { \"Content-type\": \"application/json; charset=utf-8\" },\r\n      });\r\n      const data = await res.json();\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const update = createAsyncThunk(\r\n  \"productsSlice/update\",\r\n  async (productData, thunkApi) => {\r\n    const { rejectWithValue } = thunkApi;\r\n    try {\r\n      const res = await fetch(\r\n        `http://localhost:3000/products/${productData.id}`,\r\n        {\r\n          method: \"PUT\",\r\n\r\n          body: JSON.stringify(productData),\r\n\r\n          headers: { \"Content-type\": \"application/json; charset=utf-8\" },\r\n        }\r\n      );\r\n      const data = await res.json();\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport const deletePro = createAsyncThunk(\r\n  \"productsSlice/deletePro\",\r\n  async (productData, thunkApi) => {\r\n    const { rejectWithValue } = thunkApi;\r\n    console.log(productData);\r\n    try {\r\n      await fetch(`http://localhost:3000/products/${productData.id}`, {\r\n        method: \"DELETE\",\r\n\r\n        headers: { \"Content-type\": \"application/json; charset=utf-8\" },\r\n      });\r\n      return productData;\r\n    } catch (error) {\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nconst productsSlice = createSlice({\r\n  name: \"productsSlice\",\r\n  initialState: { products: [], loading: false, error: null },\r\n  reducers: {\r\n    // addProduct: (state, action) => {\r\n    //   state.products.push(action.payload);\r\n    // },\r\n    // updateProduct: (state, action) => {\r\n    //   console.log(state.productName);\r\n    //   console.log(action.payload);\r\n    //   const { id, productName, price, category } = action.payload;\r\n    //   const updateState = state.products.find(\r\n    //     (product) => product.id.toString() === id.toString()\r\n    //   );\r\n    //   console.log(action.payload.productName);\r\n    //   if (updateState) {\r\n    //     updateState.productName = productName;\r\n    //     updateState.price = price;\r\n    //     updateState.category = category;\r\n    //   }\r\n    // },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(api.pending, (state, action) => {\r\n      state.loading = true;\r\n      state.error = null;\r\n    });\r\n    builder.addCase(api.fulfilled, (state, action) => {\r\n      state.loading = false;\r\n\r\n      state.products = action.payload;\r\n    });\r\n    builder.addCase(api.rejected, (state, action) => {\r\n      state.loading = false;\r\n      state.error = action.payload;\r\n    });\r\n\r\n    builder.addCase(insert.pending, (state, action) => {\r\n      state.loading = true;\r\n      state.error = null;\r\n    });\r\n    builder.addCase(insert.fulfilled, (state, action) => {\r\n      state.loading = false;\r\n\r\n      state.products.push(action.payload);\r\n    });\r\n    builder.addCase(insert.rejected, (state, action) => {\r\n      state.loading = false;\r\n      state.error = action.payload;\r\n    });\r\n\r\n    builder.addCase(deletePro.fulfilled, (state, action) => {\r\n      state.loading = false;\r\n      state.products = state.products.filter(\r\n        (product) => product.id !== action.payload.id\r\n      );\r\n    });\r\n\r\n    builder.addCase(update.fulfilled, (state, action) => {\r\n      const { id, productName, price, category, img } = action.payload;\r\n      const updateState = state.products.find((product) => product.id === id);\r\n      console.log(action.payload.img);\r\n      if (updateState) {\r\n        updateState.productName = productName;\r\n        updateState.price = price;\r\n        updateState.category = category;\r\n        updateState.img = img;\r\n      }\r\n    });\r\n  },\r\n});\r\n\r\nexport const { addProduct, updateProduct } = productsSlice.actions;\r\nexport default productsSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}